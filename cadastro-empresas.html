<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Empresas</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#3B82F6",
                        "primary-hover": "#2563EB",
                        "accent": "#8B5CF6",
                        "bg-dark": "#030712",
                        "surface-dark": "#0F172A",
                        "surface-elevated": "#1E293B",
                        "border-dark": "#334155",
                        "text-main": "#F1F5F9",
                        "text-dim": "#94A3B8",
                        "success": "#10B981",
                        "warning": "#F59E0B",
                        "danger": "#EF4444"
                    },
                    fontFamily: {
                        "sans": ["Plus Jakarta Sans", "Inter", "sans-serif"],
                        "mono": ["JetBrains Mono", "monospace"]
                    },
                    boxShadow: {
                        'glow-primary': '0 0 25px rgba(59, 130, 246, 0.25)',
                        'glow-accent': '0 0 25px rgba(139, 92, 246, 0.25)'
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            body {
                @apply bg-bg-dark text-text-main font-sans antialiased selection:bg-primary/30;
            }
        }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { @apply bg-transparent; }
        ::-webkit-scrollbar-thumb { @apply bg-border-dark rounded-full hover:bg-primary/50 transition-colors; }

        .glass {
            @apply backdrop-blur-md bg-surface-dark/80 border border-white/5;
        }
        .glass-elevated {
            @apply backdrop-blur-xl bg-surface-elevated/90 border border-white/10;
        }
        .sidebar-item {
            @apply flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 text-text-dim hover:text-white hover:bg-white/5;
        }
        .sidebar-item.active {
            @apply bg-gradient-to-r from-primary/10 to-accent/10 text-primary border border-primary/20 shadow-glow-primary;
        }
        .input-pill {
            @apply w-full bg-surface-dark border border-white/10 rounded-2xl py-3 px-4 text-sm text-white placeholder:text-text-dim focus:ring-primary/50 focus:border-primary/50 transition-all;
        }
        .detail-pill {
            @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-[10px] uppercase tracking-[0.4em] font-bold text-text-dim bg-white/5 border border-white/10;
        }
        .card-outline {
            @apply glass rounded-3xl border border-white/10;
        }
        .form-label {
            @apply text-[10px] uppercase tracking-[0.4em] text-text-dim font-semibold;
        }
        .user-menu-container {
            @apply relative;
        }
        .user-dropdown-menu {
            @apply absolute right-0 mt-2 w-48 glass-elevated rounded-2xl py-2 shadow-2xl opacity-0 invisible translate-y-2 transition-all duration-200 z-[100];
        }
        .user-menu-container:hover .user-dropdown-menu {
            @apply opacity-100 visible translate-y-0;
        }

        .result-panel {
            @apply glass rounded-3xl border border-white/10 p-6 space-y-4;
        }
        #children-section.hidden {
            display: none;
        }
        .child-row {
            @apply flex items-center gap-3;
        }
        .child-row input {
            @apply input-pill w-full;
        }
        .child-row button {
            @apply px-3 py-2 rounded-full border border-white/10 text-xs tracking-[0.4em] text-text-dim uppercase;
        }
        .child-row button:hover {
            @apply border-white/30 text-white;
        }
        .family-toggle-switch {
            @apply flex items-center gap-4 bg-surface-elevated/40 border border-white/10 rounded-2xl px-4 py-3 w-full cursor-pointer transition-all;
            position: relative;
        }
        .family-toggle-switch input {
            @apply appearance-none absolute inset-0;
            opacity: 0;
            cursor: pointer;
        }
        .family-toggle-control {
            @apply absolute right-4 top-1/2 -translate-y-1/2 w-14 h-6 rounded-full border border-white/20 pointer-events-none transition duration-300 ease-in-out;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05), 0 4px 12px rgba(2, 6, 23, 0.4);
        }
        .family-toggle-switch input:checked ~ .family-toggle-control {
            background: linear-gradient(135deg, #1d4ed8, #2563eb);
            box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.6), 0 8px 18px rgba(14, 165, 233, 0.4);
        }
        .family-toggle-knob {
            @apply absolute top-[2px] left-[2px] w-6 h-6 bg-white rounded-full shadow-[0_12px_25px_rgba(15,23,42,0.7)];
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1), box-shadow 0.3s ease;
        }
        .family-toggle-switch input:checked ~ .family-toggle-control .family-toggle-knob {
            transform: translateX(24px);
        }
        .toggle-status {
            @apply absolute right-20 top-1/2 -translate-y-1/2 text-[10px] uppercase tracking-[0.4em] text-primary/70 opacity-0 transition-opacity duration-300;
        }
        .family-toggle-switch input:checked ~ .toggle-status {
            opacity: 1;
        }
        .family-toggle-icon {
            @apply w-10 h-10 rounded-full bg-surface-dark/80 border border-white/10 flex items-center justify-center text-primary;
        }
        .family-toggle-text {
            @apply flex flex-col gap-1;
        }
        .leader-card {
            @apply bg-surface-elevated/60 border border-white/5 rounded-2xl p-4 flex items-center justify-between;
        }
        .leader-card-info {
            @apply flex items-center gap-3;
        }
        .leader-icon {
            @apply w-12 h-12 rounded-full bg-surface-dark/80 border border-white/10 flex items-center justify-center;
        }
        .leader-toggle-switch {
            @apply relative inline-flex items-center justify-end w-20 h-10 rounded-full cursor-pointer;
        }
        .leader-toggle-switch input {
            @apply absolute inset-0 opacity-0 cursor-pointer;
        }
        .leader-toggle-control {
            @apply absolute right-1 top-1/2 -translate-y-1/2 w-14 h-6 rounded-full border border-white/20 pointer-events-none transition duration-300 ease-in-out;
            background: rgba(255, 255, 255, 0.08);
            box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.06), 0 4px 12px rgba(2, 6, 23, 0.45);
        }
        .leader-toggle-control .leader-toggle-knob {
            @apply absolute top-[2px] left-[2px] w-6 h-6 bg-white rounded-full shadow-[0_12px_25px_rgba(15,23,42,0.7)];
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .leader-toggle-switch input:checked ~ .leader-toggle-control {
            background: linear-gradient(135deg, #1d4ed8, #2563eb);
            box-shadow: inset 0 0 0 1px rgba(59, 130, 246, 0.6), 0 8px 18px rgba(14, 165, 233, 0.5);
        }
        .leader-toggle-switch input:checked ~ .leader-toggle-control .leader-toggle-knob {
            transform: translateX(12px);
        }
        .leader-toggle-status {
            @apply absolute right-20 top-1/2 -translate-y-1/2 text-[9px] uppercase tracking-[0.5em] text-primary/70 opacity-0 transition-opacity duration-300;
        }
        .leader-toggle-switch input:checked ~ .leader-toggle-status {
            opacity: 1;
        }
        .family-icon svg {
            display: block;
        }
        .cep-search-btn {
            @apply absolute right-2 top-1/2 -translate-y-1/2 bg-gradient-to-br from-primary/90 to-primary hover:from-primary hover:to-accent text-white rounded-full px-4 py-2 flex items-center gap-2 text-sm font-semibold shadow-[0_10px_20px_rgba(15,23,42,0.6)];
            border: none;
        }
        .cep-enter-hint {
            @apply absolute right-24 top-1/2 -translate-y-1/2 flex items-center gap-1 bg-white/5 px-2 py-1 rounded-full text-[10px] uppercase tracking-[0.4em] text-primary/80;
            border: 1px solid rgba(14, 165, 233, 0.4);
        }
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
    </style>

    <style>
        .brand-bolt-wrap {
            position: relative;
        }
        .brand-bolt-wrap::after {
            content: "";
            position: absolute;
            inset: -6px;
            border-radius: 18px;
            background: radial-gradient(circle at 40% 30%, rgba(250, 204, 21, 0.85), rgba(250, 204, 21, 0.25) 45%, rgba(250, 204, 21, 0) 70%);
            filter: blur(10px);
            opacity: 0.0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .brand-bolt-wrap:hover::after {
            opacity: 1;
        }
        .brand-bolt {
            color: #facc15;
            filter: drop-shadow(0 0 10px rgba(250, 204, 21, 0.9)) drop-shadow(0 0 22px rgba(250, 204, 21, 0.7));
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .brand-bolt-wrap:hover .brand-bolt {
            transform: scale(1.18) rotate(-2deg);
            filter: drop-shadow(0 0 16px rgba(250, 204, 21, 1)) drop-shadow(0 0 34px rgba(250, 204, 21, 0.85));
        }
    </style>


    <style>
        .brand-bolt-wrap::after { display: none; }
        .brand-initials {
            font-weight: 800;
            font-size: 0.9rem;
            letter-spacing: 0.12em;
            color: #e2e8f0;
            text-transform: uppercase;
        }
    </style>

</head>
<body class="flex h-screen overflow-hidden">
    <aside class="w-72 glass border-r border-border-dark flex flex-col p-6 z-50" data-sidebar-active="cadastro-empresas">
        <div class="flex items-center gap-4 mb-10 px-2">
            <div>
                <h1 class="font-extrabold text-lg tracking-tight bg-gradient-to-r from-white to-text-dim bg-clip-text text-transparent">UltraRH</h1>
                <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-primary">Admin Panel</p>
            </div>
        </div>

               <nav id="sidebar-links" class="flex-1 space-y-2 overflow-y-auto pr-2">
        </nav>


        <div class="mt-auto pt-6 border-t border-border-dark space-y-2">
            <button onclick="cleanupCandidates()" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-text-dim hover:text-danger hover:bg-danger/5 transition-all text-sm font-medium">
                <span class="material-symbols-rounded">delete_sweep</span>
                Limpar Expirados
            </button>
            <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-text-dim hover:text-white hover:bg-white/5 transition-all text-sm font-medium">
                <span class="material-symbols-rounded">logout</span>
                Sair do Sistema
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0 bg-bg-dark relative overflow-hidden">
        <div class="absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-[120px] pointer-events-none"></div>
        <div class="absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-accent/5 rounded-full blur-[120px] pointer-events-none"></div>

        <header class="h-20 glass border-b border-border-dark flex items-center justify-between px-8 z-40">
            <div class="flex items-center gap-6">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <h2 id="user-greeting" class="text-sm font-bold text-white">Bom dia, Jeferson</h2>
                        <span class="text-xs text-text-dim">|</span>
                        <span id="current-time" class="text-xs font-mono text-primary font-bold">10:02:54</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="w-2 h-2 rounded-full bg-success animate-pulse"></span>
                        <span class="text-[10px] font-mono text-text-dim uppercase tracking-wider">Sistema Online</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center gap-6">
                <div class="relative user-menu-container">
                    <div class="flex items-center gap-3 pl-6 border-l border-border-dark cursor-pointer group">
                        <div class="text-right hidden sm:block">
                            <p id="user-name-display" class="text-xs font-bold text-white group-hover:text-primary transition-colors">Jeferson</p>
                            <p id="user-role-display" class="text-[10px] text-text-dim font-mono uppercase">Desenvolvedor</p>
                        </div>
                        <div class="w-10 h-10 rounded-xl bg-surface-elevated border border-border-dark flex items-center justify-center overflow-hidden group-hover:border-primary transition-all">
                            <img id="user-avatar" src="https://ui-avatars.com/api/?name=Jeferson&background=0F172A&color=3B82F6" alt="Jeferson">
                        </div>
                        <span class="material-symbols-rounded text-text-dim group-hover:text-white transition-colors">expand_more</span>
                    </div>
                    <div class="user-dropdown-menu">
                        <div class="px-4 py-3 border-b border-white/5">
                            <p class="text-[10px] font-bold text-text-dim uppercase tracking-widest">Conta</p>
                        </div>
                        <a href="perfil.html" class="flex items-center gap-3 px-4 py-2.5 text-sm text-text-dim hover:text-white hover:bg-white/5 transition-all">
                            <span class="material-symbols-rounded text-lg">person</span>
                            Meu Perfil
                        </a>
                        <a href="configuracoes.html" class="flex items-center gap-3 px-4 py-2.5 text-sm text-text-dim hover:text-white hover:bg-white/5 transition-all">
                            <span class="material-symbols-rounded text-lg">settings</span>
                            Configurações
                        </a>
                        <div class="h-px bg-white/5 my-1"></div>
                        <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-2.5 text-sm text-danger hover:bg-danger/5 transition-all">
                            <span class="material-symbols-rounded text-lg">logout</span>
                            Sair da Conta
                        </button>
                    </div>
                </div>
            </div>
        </header>
    <div class="flex-1 overflow-y-auto p-8 space-y-6">
        <form id="empresa-form" class="space-y-6">
            <section class="glass p-8 space-y-5">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs uppercase tracking-[0.4em] text-text-dim flex items-center gap-2">
                            <span class="material-symbols-rounded text-primary text-lg">search</span>
                            Busca CNPJ
                        </p>
                        <h3 class="text-2xl font-semibold text-white">Consultar dados oficiais</h3>
                    </div>
                    <span class="detail-pill">Campos com * obrigatórios</span>
                </div>
                <p id="form-mode-indicator" class="text-xs font-mono uppercase tracking-[0.4em] text-primary"></p>
                <div class="grid gap-4 md:grid-cols-3">
                    <div class="md:col-span-2">
                        <label class="form-label">
                            <span class="material-symbols-rounded text-primary text-base">badge</span>
                            CNPJ *
                        </label>
                        <input id="cnpj-input" name="cnpj" type="text" maxlength="18" autocomplete="off" required class="input-pill pr-12" placeholder="00.000.000/0000-00" />
                    </div>
                    <div class="flex items-end">
                        <button type="button" id="search-cnpj-btn" class="w-full px-5 py-3 bg-gradient-to-br from-primary to-accent text-white rounded-2xl font-semibold shadow-lg shadow-primary/30 uppercase tracking-[0.4em] text-[10px] flex items-center justify-center gap-2">
                            <span class="material-symbols-rounded">search</span>
                            Buscar
                        </button>
                    </div>
                </div>
                <div class="flex flex-wrap items-center gap-3">
                    <button type="button" id="paste-cnpj-btn" class="px-4 py-2 rounded-full border border-white/10 text-[10px] uppercase tracking-[0.4em] text-text-dim hover:border-white/30 hover:text-white transition-all flex items-center gap-2">
                        <span class="material-symbols-rounded text-sm">content_paste</span>
                        Colar CNPJ
                    </button>
                    <button type="button" id="clear-cnpj-btn" class="px-4 py-2 rounded-full border border-white/10 text-[10px] uppercase tracking-[0.4em] text-text-dim hover:border-white/30 hover:text-white transition-all flex items-center gap-2">
                        <span class="material-symbols-rounded text-sm">close</span>
                        Limpar
                    </button>
                    <button type="button" id="load-local-company-btn" class="hidden px-4 py-2 rounded-full border border-primary/30 text-[10px] uppercase tracking-[0.4em] text-primary hover:border-white/40 transition-all flex items-center gap-2">
                        <span class="material-symbols-rounded text-sm">download</span>
                        Carregar cadastro local
                    </button>
                    <span class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Fonte: Receita via CNPJa</span>
                </div>
                <p id="cnpj-search-status" class="text-xs text-text-dim">Digite um CNPJ e clique em buscar ou pressione Enter.</p>
                <div class="space-y-2">
                    <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Últimas buscas</p>
                    <div id="cnpj-recent-list" class="flex flex-wrap gap-2"></div>
                    <p id="cnpj-cache-hint" class="text-xs text-text-dim"></p>
                </div>
            </section>
            <section class="glass p-8 space-y-5">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs uppercase tracking-[0.4em] text-text-dim flex items-center gap-2">
                            <span class="material-symbols-rounded text-primary text-lg">business</span>
                            Dados oficiais
                        </p>
                        <h3 class="text-2xl font-semibold text-white">Informações principais</h3>
                    </div>
                </div>
                <div class="grid gap-4 md:grid-cols-3">
                    <div>
                        <label class="form-label">Razão social *</label>
                        <input name="razao_social" type="text" required class="input-pill" placeholder="UltraRH" />
                    </div>
                    <div>
                        <label class="form-label">Nome fantasia</label>
                        <input name="nome_fantasia" type="text" class="input-pill" placeholder="UltraRH" />
                    </div>
                    <div>
                        <label class="form-label">Atividade principal</label>
                        <input name="atividade_principal" type="text" class="input-pill" placeholder="Comércio varejista de..." />
                    </div>
                    <div>
                        <label class="form-label">Situação cadastral</label>
                        <input name="situacao_cadastral" type="text" class="input-pill" placeholder="Ativa" />
                    </div>
                    <div>
                        <label class="form-label">Data da situação</label>
                        <input name="data_situacao_cadastral" type="date" class="input-pill" />
                    </div>
                    <div>
                        <label class="form-label">Matriz / Filial</label>
                        <input name="matriz_filial" type="text" class="input-pill" placeholder="Matriz" />
                    </div>
                    <div>
                        <label class="form-label">Data início atividade</label>
                        <input name="data_inicio_atividade" type="date" class="input-pill" />
                    </div>
                    <div>
                        <label class="form-label">CNES principal</label>
                        <input name="cnae_principal" type="text" class="input-pill" placeholder="0000000" />
                    </div>
                    <div class="md:col-span-3">
                        <label class="form-label">CNES secundários (uma por linha)</label>
                        <textarea name="cnaes_secundarios" rows="3" class="input-pill min-h-[90px]" placeholder="0000001\n0000002"></textarea>
                    </div>
                    <div>
                        <label class="form-label">Capital Social</label>
                        <input name="capital_social" type="text" class="input-pill" placeholder="R$ 1.000,00" />
                    </div>
                    <div>
                        <label class="form-label">Porte da empresa</label>
                        <input name="porte_empresa" type="text" class="input-pill" placeholder="Microempresa (ME)" />
                    </div>
                    <div>
                        <label class="form-label">Optante Simples?</label>
                        <input name="opcao_simples" type="text" class="input-pill" placeholder="Sim / Não" />
                    </div>
                    <div>
                        <label class="form-label">Data opção Simples</label>
                        <input name="data_opcao_simples" type="date" class="input-pill" />
                    </div>
                    <div>
                        <label class="form-label">Optante MEI?</label>
                        <input name="opcao_mei" type="text" class="input-pill" placeholder="Sim / Não" />
                    </div>
                    <div>
                        <label class="form-label">Data opção MEI</label>
                        <input name="data_opcao_mei" type="date" class="input-pill" />
                    </div>
                </div>
            </section>
            <section class="glass p-8 space-y-3">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs uppercase tracking-[0.4em] text-text-dim flex items-center gap-2">
                            <span class="material-symbols-rounded text-primary text-lg">contacts</span>
                            Contatos e QSA
                        </p>
                        <h3 class="text-2xl font-semibold text-white">Telefones e sócios</h3>
                    </div>
                </div>
                <div class="grid gap-4 md:grid-cols-2">
                    <div>
                        <label class="form-label">Telefones (DDD + número)</label>
                        <textarea name="telefones" rows="3" class="input-pill min-h-[90px]" placeholder="(11) 90000-0000"></textarea>
                    </div>
                    <div>
                        <label class="form-label">QSA (Sócios / CNPJ/CPF / Função)</label>
                        <textarea name="qsa" rows="3" class="input-pill min-h-[90px]" placeholder="Sócio Fulano - CPF - Administrador"></textarea>
                    </div>
                </div>
            </section>
            <section class="glass p-8 space-y-5">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs uppercase tracking-[0.4em] text-text-dim flex items-center gap-2">
                            <span class="material-symbols-rounded text-primary text-lg">location_on</span>
                            Endereço
                        </p>
                        <h3 class="text-2xl font-semibold text-white">Localização</h3>
                    </div>
                </div>
                <div class="grid gap-4 md:grid-cols-3">
                    <div>
                        <label class="form-label">CEP</label>
                        <input name="cep" type="text" maxlength="9" class="input-pill" placeholder="00000-000" />
                    </div>
                    <div>
                        <label class="form-label">Logradouro</label>
                        <input name="logradouro" type="text" class="input-pill" placeholder="Rua Exemplo" />
                    </div>
                    <div>
                        <label class="form-label">Número</label>
                        <input name="numero" type="text" class="input-pill" placeholder="000" />
                    </div>
                    <div>
                        <label class="form-label">Bairro</label>
                        <input name="bairro" type="text" class="input-pill" placeholder="Centro" />
                    </div>
                    <div>
                        <label class="form-label">Cidade</label>
                        <input name="cidade" type="text" class="input-pill" placeholder="São Paulo" />
                    </div>
                    <div>
                        <label class="form-label">Estado</label>
                        <input name="estado" type="text" class="input-pill" placeholder="SP" />
                    </div>
                    <div class="md:col-span-3">
                        <label class="form-label">Complemento</label>
                        <input name="complemento" type="text" class="input-pill" placeholder="Sala / Andar / Bloco" />
                    </div>
                </div>
            </section>
            <section class="glass p-8 space-y-3">
                <label class="form-label">Atividades secundárias</label>
                <textarea name="atividades_secundarias" rows="4" class="input-pill min-h-[120px]" placeholder="Informe uma por linha"></textarea>
            </section>
            <section class="glass p-8 space-y-3">
                <label class="form-label">Observações internas</label>
                <textarea name="observacoes" rows="4" class="input-pill min-h-[120px]" placeholder="Notas do analista"></textarea>
            </section>
            <section class="glass p-8 space-y-4">
                <div class="result-panel" id="cnpj-result-panel">
                    <div class="flex items-center justify-between">
                        <p class="text-xs uppercase tracking-[0.4em] text-text-dim">Dados da Receita</p>
                        <span id="lookup-timestamp" class="text-[10px] text-text-dim">Pronto para buscar</span>
                    </div>
                    <div class="grid gap-4 md:grid-cols-3">
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">CNPJ</p>
                            <p id="lookup-cnpj" class="text-lg font-semibold text-white">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Razão social</p>
                            <p id="result-razao" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Nome fantasia</p>
                            <p id="result-fantasia" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Situação</p>
                            <p id="result-situacao" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Data situação</p>
                            <p id="result-data-situacao" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Matriz / filial</p>
                            <p id="result-matriz" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Data início</p>
                            <p id="result-data-inicio" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">CNAE principal</p>
                            <p id="result-cnae" class="text-sm text-text-dim">—</p>
                        </div>
                        <div class="md:col-span-3">
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">CNAEs secundários</p>
                            <ul id="result-cnaes" class="list-disc list-inside text-text-dim text-[12px] space-y-1">
                                <li>—</li>
                            </ul>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Capital social</p>
                            <p id="result-capital" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Porte</p>
                            <p id="result-porte" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Optante Simples</p>
                            <p id="result-simples" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Data Simples</p>
                            <p id="result-simples-data" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Optante MEI</p>
                            <p id="result-mei" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Data MEI</p>
                            <p id="result-mei-data" class="text-sm text-text-dim">—</p>
                        </div>
                        <div class="md:col-span-3">
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Endereço</p>
                            <p id="result-address" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Cidade / UF</p>
                            <p id="result-city" class="text-sm text-text-dim">—</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">CEP</p>
                            <p id="result-cep" class="text-sm text-text-dim">—</p>
                        </div>
                        <div class="md:col-span-3">
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Telefones</p>
                            <ul id="result-telefones" class="list-disc list-inside text-text-dim text-[12px] space-y-1">
                                <li>—</li>
                            </ul>
                        </div>
                        <div class="md:col-span-3">
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Emails</p>
                            <p id="result-email" class="text-sm text-text-dim">—</p>
                        </div>
                        <div class="md:col-span-3">
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">QSA</p>
                            <ul id="result-qsa" class="list-disc list-inside text-text-dim text-[12px] space-y-1">
                                <li>—</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </section>
            <section class="glass p-8 space-y-4">
                <div class="flex items-center justify-between">
                    <div>
                        <p class="text-xs uppercase tracking-[0.4em] text-text-dim">Base de empresas</p>
                        <h3 class="text-2xl font-semibold text-white">Últimos cadastros</h3>
                    </div>
                    <button type="button" id="refresh-companies-btn" class="text-[10px] uppercase tracking-[0.4em] text-primary">Atualizar lista</button>
                </div>
                <div id="saved-companies" class="space-y-3"></div>
            </section>
            <div class="flex items-center justify-between">
                <div id="form-feedback" class="text-sm text-text-dim"></div>
                <div class="flex gap-3">
                    <button type="reset" class="px-6 py-3 border border-white/10 rounded-2xl text-text-dim hover:border-white/40 uppercase tracking-[0.4em] text-xs">Limpar</button>
                    <button type="submit" id="empresa-submit-btn" class="px-6 py-3 bg-gradient-to-r from-primary to-accent text-white rounded-2xl font-semibold shadow-lg shadow-primary/30 uppercase tracking-[0.4em] text-xs">Salvar empresa</button>
                </div>
            </div>
        </form>
    </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="scripts/sidebar.js"></script>
    <script src="scripts/admin-common.js"></script>
    <script>
        function updateHeaderClock() {
            const now = new Date();
            const element = document.getElementById("current-time");
            if (element) {
                element.textContent = now.toLocaleTimeString("pt-BR", { hour12: false });
            }
        }

        function getGreeting() {
            const hour = new Date().getHours();
            if (hour >= 5 && hour < 12) return "Bom dia";
            if (hour >= 12 && hour < 18) return "Boa tarde";
            return "Boa noite";
        }

        function setUserHeader() {
            const user = getAuthUser() || {};
            const greeting = document.getElementById("user-greeting");
            const nameDisplay = document.getElementById("user-name-display");
            const roleDisplay = document.getElementById("user-role-display");
            const avatar = document.getElementById("user-avatar");
            const item = user.nome || user.name || user.email || "Administrador";
            if (greeting) greeting.textContent = `${getGreeting()}, ${item}`;
            if (nameDisplay) nameDisplay.textContent = item;
            if (roleDisplay) roleDisplay.textContent = (user.funcao || user.role || "Root Access").toUpperCase();
            if (avatar) {
                avatar.src = user.avatar_url || user.foto || user.photo || user.avatar || `https://ui-avatars.com/api/?name=${encodeURIComponent(item)}&background=0F172A&color=3B82F6`;
                avatar.alt = item;
            }
        }

        document.addEventListener("DOMContentLoaded", () => {
            updateHeaderClock();
            setInterval(updateHeaderClock, 1000);
            setUserHeader();
        });
    </script>
     <script src="scripts/aton-widget.js" defer></script>
    <script src="scripts/cadastro-empresas.js"></script>
</body>
</html>

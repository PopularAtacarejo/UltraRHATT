<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro de Colaboradores</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/tailwind.css">

    <style>
        .brand-bolt-wrap {
            position: relative;
        }
        .brand-bolt-wrap::after {
            content: "";
            position: absolute;
            inset: -6px;
            border-radius: 18px;
            background: radial-gradient(circle at 40% 30%, rgba(250, 204, 21, 0.85), rgba(250, 204, 21, 0.25) 45%, rgba(250, 204, 21, 0) 70%);
            filter: blur(10px);
            opacity: 0.0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .brand-bolt-wrap:hover::after {
            opacity: 1;
        }
        .brand-bolt {
            color: #facc15;
            filter: drop-shadow(0 0 10px rgba(250, 204, 21, 0.9)) drop-shadow(0 0 22px rgba(250, 204, 21, 0.7));
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .brand-bolt-wrap:hover .brand-bolt {
            transform: scale(1.18) rotate(-2deg);
            filter: drop-shadow(0 0 16px rgba(250, 204, 21, 1)) drop-shadow(0 0 34px rgba(250, 204, 21, 0.85));
        }
    </style>


    <style>
        .brand-bolt-wrap::after { display: none; }
        .brand-initials {
            font-weight: 800;
            font-size: 0.9rem;
            letter-spacing: 0.12em;
            color: #e2e8f0;
            text-transform: uppercase;
        }
    </style>

</head>
<body class="flex h-screen overflow-hidden">
    <aside class="w-72 glass border-r border-border-dark flex flex-col p-6 z-50" data-sidebar-active="cadastro-funcionarios">
        <div class="flex items-center gap-4 mb-10 px-2">
            <div>
                <h1 class="font-extrabold text-lg tracking-tight bg-gradient-to-r from-white to-text-dim bg-clip-text text-transparent">UltraRH</h1>
                <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-primary">Admin Panel</p>
            </div>
        </div>

                <nav id="sidebar-links" class="flex-1 space-y-2 overflow-y-auto pr-2">
        </nav>


        <div class="mt-auto pt-6 border-t border-border-dark space-y-2">
            <button onclick="alert('Limpando expirados...')" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-text-dim hover:text-danger hover:bg-danger/5 transition-all text-sm font-medium">
                <span class="material-symbols-rounded">delete_sweep</span>
                Limpar Expirados
            </button>
            <button onclick="alert('Saindo...')" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-text-dim hover:text-white hover:bg-white/5 transition-all text-sm font-medium">
                <span class="material-symbols-rounded">logout</span>
                Sair do Sistema
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0 bg-bg-dark relative overflow-hidden">
        <div class="absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-[120px] pointer-events-none"></div>
        <div class="absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-accent/5 rounded-full blur-[120px] pointer-events-none"></div>

        <header class="h-20 glass border-b border-border-dark flex items-center justify-between px-8 z-40">
            <div class="flex items-center gap-6">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <h2 id="user-greeting" class="text-sm font-bold text-white">Bom dia, Administrador</h2>
                        <span class="text-xs text-text-dim">|</span>
                        <span id="current-time" class="text-xs font-mono text-primary font-bold">00:00:00</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="w-2 h-2 rounded-full bg-success animate-pulse"></span>
                        <span class="text-[10px] font-mono text-text-dim uppercase tracking-wider">Sistema Online</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center gap-6">
                <div class="relative user-menu-container">
                    <div class="flex items-center gap-3 pl-6 border-l border-border-dark cursor-pointer group">
                        <div class="text-right hidden sm:block">
                            <p id="user-name-display" class="text-xs font-bold text-white group-hover:text-primary transition-colors">Administrador</p>
                            <p id="user-role-display" class="text-[10px] text-text-dim font-mono uppercase">Root Access</p>
                        </div>
                        <div class="w-10 h-10 rounded-xl bg-surface-elevated border border-border-dark flex items-center justify-center overflow-hidden group-hover:border-primary transition-all">
                            <img id="user-avatar" src="https://ui-avatars.com/api/?name=Admin&background=0F172A&color=3B82F6" alt="Admin">
                        </div>
                        <span class="material-symbols-rounded text-text-dim group-hover:text-white transition-colors">expand_more</span>
                    </div>
                    <div class="user-dropdown-menu">
                        <div class="px-4 py-3 border-b border-white/5">
                            <p class="text-[10px] font-bold text-text-dim uppercase tracking-widest">Conta</p>
                        </div>
                        <a href="perfil.html" class="flex items-center gap-3 px-4 py-2.5 text-sm text-text-dim hover:text-white hover:bg-white/5 transition-all">
                            <span class="material-symbols-rounded text-lg">person</span>
                            Meu Perfil
                        </a>
                        <a href="configuracoes.html" class="flex items-center gap-3 px-4 py-2.5 text-sm text-text-dim hover:text-white hover:bg-white/5 transition-all">
                            <span class="material-symbols-rounded text-lg">settings</span>
                            Configurações
                        </a>
                        <div class="h-px bg-white/5 my-1"></div>
                        <button onclick="alert('Saindo...')" class="w-full flex items-center gap-3 px-4 py-2.5 text-sm text-danger hover:bg-danger/5 transition-all">
                            <span class="material-symbols-rounded text-lg">logout</span>
                            Sair da Conta
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-8 space-y-6">
            <form id="cadastro-form" class="space-y-6">
                <section class="glass p-8 space-y-5 rounded-3xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs uppercase tracking-wider text-text-dim flex items-center gap-2">
                                <span class="material-symbols-rounded text-primary text-lg">person</span>
                                Dados Pessoais
                            </p>
                            <h3 class="text-2xl font-semibold text-white">Identificação</h3>
                        </div>
                        <span class="detail-pill">Campos com * são obrigatórios</span>
                    </div>
                    <div class="grid gap-4 md:grid-cols-2">
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">person</span> Nome Completo *</label>
                            <input name="nome_completo" type="text" required class="input-pill" placeholder="Maria Silva Santos" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">badge</span> CPF *</label>
                            <div class="relative">
                                <input id="cpf-input" name="cpf" type="text" maxlength="14" required class="input-pill pr-12" placeholder="000.000.000-00" />
                                <span class="material-symbols-rounded absolute right-3 top-1/2 -translate-y-1/2 text-primary text-xl">search</span>
                            </div>
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">calendar_today</span> Data de Nascimento *</label>
                            <input name="data_nascimento" type="date" required class="input-pill" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">location_city</span> Naturalidade *</label>
                            <input name="naturalidade" type="text" required class="input-pill" placeholder="Cidade de nascimento" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">wc</span> Sexo *</label>
                            <select name="sexo" required class="input-pill">
                                <option value="">Selecione</option>
                                <option value="masculino">Masculino</option>
                                <option value="feminino">Feminino</option>
                            </select>
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">perm_identity</span> RG *</label>
                            <input name="rg" type="text" required class="input-pill" placeholder="12.345.678-9" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">account_balance</span> PIS *</label>
                            <input name="pis" type="text" required class="input-pill" placeholder="123.45678.90-1" />
                        </div>
                    </div>
                </section>

                <section class="glass p-8 space-y-6 rounded-3xl">
                    <div class="grid gap-4 md:grid-cols-2">
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">checkroom</span> Tamanho do Fardamento (Opcional)</label>
                            <select name="tamanho_fardamento" class="input-pill">
                                <option value="">Selecione o tamanho</option>
                                <option value="pp">PP</option>
                                <option value="p">P</option>
                                <option value="m">M</option>
                                <option value="g">G</option>
                                <option value="gg">GG</option>
                                <option value="xgg">XGG</option>
                                <option value="xxg">XXG</option>
                            </select>
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">directions_walk</span> Tamanho do Calçado (Opcional)</label>
                            <select name="tamanho_calcado" class="input-pill">
                                <option value="">Selecione o tamanho</option>
                                <option value="33">33</option>
                                <option value="34">34</option>
                                <option value="35">35</option>
                                <option value="36">36</option>
                                <option value="37">37</option>
                                <option value="38">38</option>
                                <option value="39">39</option>
                                <option value="40">40</option>
                                <option value="41">41</option>
                                <option value="42">42</option>
                                <option value="43">43</option>
                                <option value="44">44</option>
                                <option value="45">45</option>
                                <option value="46">46</option>
                                <option value="47">47</option>
                                <option value="48">48</option>
                            </select>
                        </div>
                    </div>
                </section>

                <section class="glass p-8 space-y-5 rounded-3xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs uppercase tracking-wider text-text-dim flex items-center gap-2">
                                <span class="material-symbols-rounded text-primary text-lg">work</span>
                                Dados Profissionais
                            </p>
                            <h3 class="text-2xl font-semibold text-white">Contratação</h3>
                        </div>
                    </div>
                    <div class="grid gap-4 md:grid-cols-3">
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">apartment</span> Empresa *</label>
                            <select name="empresa" required class="input-pill">
                                <option value="">Carregando empresas reais...</option>
                            </select>
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">domain</span> Setor *</label>
                            <select name="setor" required class="input-pill">
                                <option value="">Carregando setores reais...</option>
                            </select>
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">work_outline</span> Função *</label>
                            <select name="funcao" required class="input-pill">
                                <option value="">Carregando funções reais...</option>
                            </select>
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">code</span> CBO *</label>
                            <input name="cbo" type="text" required class="input-pill" placeholder="411505" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">badge</span> Matrícula *</label>
                            <input name="matricula" type="text" required class="input-pill" placeholder="000123" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">calendar_today</span> Data de Admissão *</label>
                            <input name="data_admissao" type="date" required class="input-pill" />
                        </div>
                        <div class="md:col-span-2">
                            <div class="leader-card">
                                <div class="leader-card-info">
                                    <div class="leader-icon">
                                        <span class="material-symbols-rounded text-primary text-lg">playlist_add_check_circle</span>
                                    </div>
                                    <div>
                                        <p class="text-sm text-white font-semibold">Em experiência</p>
                                        <p class="text-xs text-text-dim">Ative se o colaborador estiver no período de experiência.</p>
                                    </div>
                                </div>
                                <label class="leader-toggle-switch">
                                    <input id="em-experiencia" name="em_experiencia" type="checkbox" role="switch">
                                    <span class="leader-toggle-control">
                                        <span class="leader-toggle-knob"></span>
                                    </span>
                                    <span class="leader-toggle-status">Ativo</span>
                                </label>
                            </div>
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">attach_money</span> Salário *</label>
                            <input name="salario" type="text" required class="input-pill" placeholder="R$ 0,00" id="salario-input" />
                        </div>
                        <div class="md:col-span-2 space-y-2">
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">support_agent</span> Líder Responsável *</label>
                            <select name="lider_responsavel" required class="input-pill">
                                <option value="">Carregando líderes reais...</option>
                            </select>
                            <p id="leader-toggle-note" class="text-[10px] text-danger hidden">Este colaborador já é líder, portanto não selecione outro líder responsável.</p>
                        </div>
                        <div class="md:col-span-3">
                            <label class="field-label">
                                <span class="material-symbols-rounded text-primary text-base">emoji_events</span>
                                Este funcionário é um Líder/Gestor
                            </label>
                            <div class="leader-card">
                                <div class="leader-card-info">
                                    <div class="leader-icon">
                                        <svg width="28" height="28" viewBox="0 0 32 32" fill="none">
                                            <path d="M6 17l1.5-7L13 13l3-8 3.5 7 3-5 3 8 2-5 2 6-6 2 2 3-10-2-6 3 1-7z" stroke="#FACC15" stroke-width="2" fill="rgba(250, 204, 21, 0.2)" stroke-linecap="round" stroke-linejoin="round"/>
                                        </svg>
                                    </div>
                                    <div>
                                        <p class="text-sm text-white font-semibold">Liderança ativa</p>
                                        <p class="text-xs text-text-dim">Ative esta opção se o colaborador lidera outros colaboradores.</p>
                                    </div>
                                </div>
                                <label class="leader-toggle-switch">
                                    <input id="lider-gestor" name="lider_gestor_checkbox" type="checkbox" role="switch">
                                    <span class="leader-toggle-control">
                                        <span class="leader-toggle-knob"></span>
                                    </span>
                                    <span class="leader-toggle-status">Ativo</span>
                                </label>
                            </div>
                        </div>
                    </div>
                </section>

                <section class="glass p-8 space-y-5 rounded-3xl">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-xs uppercase tracking-wider text-text-dim flex items-center gap-2">
                                <span class="material-symbols-rounded text-primary text-lg">location_on</span>
                                Endereço
                            </p>
                            <h3 class="text-2xl font-semibold text-white">Localização</h3>
                        </div>
                    </div>
                    <div class="grid gap-4 md:grid-cols-3">
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">location_on</span> CEP *</label>
                            <div class="relative">
                                <input id="cep-input" name="cep" type="text" required class="input-pill pr-24" placeholder="00000-000" />
                                <button type="button" id="buscar-cep-btn" class="cep-search-btn">
                                    <span>Buscar</span>
                                </button>
                                <div class="cep-enter-hint" aria-hidden="true">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                                        <path d="M6 10h9l-3 3 3 3H6" stroke="#0EA5E9" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                        <path d="M15 6v12" stroke="#0EA5E9" stroke-width="2" stroke-linecap="round"/>
                                    </svg>
                                    <span>Enter</span>
                                </div>
                            </div>
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">home</span> Rua *</label>
                            <input id="rua-input" name="rua" type="text" required class="input-pill" placeholder="Rua Exemplo" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">pin</span> Número</label>
                            <input name="numero" type="text" class="input-pill" placeholder="000" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">home_work</span> Bairro *</label>
                            <input id="bairro-input" name="bairro" type="text" required class="input-pill" placeholder="Centro" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">location_city</span> Cidade *</label>
                            <input id="cidade-input" name="cidade" type="text" required class="input-pill" placeholder="São Paulo" />
                        </div>
                        <div>
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">flag</span> Estado *</label>
                            <input id="estado-input" name="estado" type="text" required class="input-pill" placeholder="SP" />
                        </div>
                        <div class="md:col-span-3">
                            <label class="field-label"><span class="material-symbols-rounded text-primary text-base">add_location</span> Complemento</label>
                            <input name="complemento" type="text" class="input-pill" placeholder="Apartamento, bloco, etc." />
                        </div>
                    </div>
                </section>

                <section class="glass p-8 space-y-6 rounded-3xl">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="family-icon">
                                <svg width="32" height="32" viewBox="0 0 48 48" fill="none">
                                    <circle cx="24" cy="14" r="8" stroke="#38BDF8" stroke-width="2"/>
                                    <path d="M10 36C10 29.3726 15.3726 24 22 24H26C32.6274 24 38 29.3726 38 36V40H10V36Z" stroke="#38BDF8" stroke-width="2"/>
                                    <path d="M18 28C18 24.6863 20.6863 22 24 22V22" stroke="#38BDF8" stroke-width="2"/>
                                </svg>
                            </div>
                            <div>
                                <h3 class="text-2xl font-semibold text-white">Informações Familiares</h3>
                            </div>
                        </div>
                        <label class="family-toggle-switch max-w-xs">
                            <div class="family-toggle-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                    <path d="M12 3a4 4 0 110 8 4 4 0 010-8zm-3.5 9c-1.5.5-3 1.7-3 3.5V19h6.5" stroke="#0EA5E9" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M20 18v-2.5c0-1.8-1.5-3-3-3H13" stroke="#0EA5E9" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                            </div>
                            <div class="family-toggle-text">
                                <span class="text-sm font-semibold text-white">É Pai/Mãe?</span>
                                <span class="text-xs text-text-dim">Ative se tiver filhos.</span>
                            </div>
                            <input id="family-toggle" type="checkbox" role="switch">
                            <span class="family-toggle-control">
                                <span class="family-toggle-knob"></span>
                            </span>
                            <span class="toggle-status">Ativo</span>
                        </label>
                    </div>
                    <div id="children-section" class="space-y-4 hidden">
                        <div class="flex items-center justify-between">
                            <p class="text-sm text-text-dim">Informe até 10 filhos. Nome opcional e data de nascimento obrigatória quando ativo.</p>
                            <button type="button" id="add-child-btn" class="px-4 py-2 rounded-full border border-primary/30 text-xs uppercase tracking-wider text-primary transition hover:border-primary hover:bg-primary/10">Adicionar filho</button>
                        </div>
                        <div id="children-list" class="space-y-3"></div>
                    </div>
                    <div id="family-preview" class="glass rounded-3xl border border-white/10 p-5 space-y-3">
                        <div class="flex items-center justify-between">
                            <p class="text-xs uppercase tracking-wider text-text-dim">Ficha cadastral</p>
                            <button type="button" id="download-ficha-btn" class="text-[10px] uppercase tracking-[0.6em] text-primary hover:text-white transition-colors">Baixar PDF</button>
                        </div>
                        <div id="family-preview-content" class="text-sm text-text-dim space-y-1">
                            <p>Nenhuma informação familiar registrada.</p>
                        </div>
                    </div>
                </section>

                <div class="flex items-center justify-between pb-10">
                    <div id="form-feedback" class="text-sm font-medium"></div>
                    <div class="flex gap-3">
                        <button type="reset" class="px-8 py-3 border border-white/10 rounded-2xl text-text-dim hover:border-white/40 transition-all">Limpar</button>
                        <button type="submit" class="px-10 py-3 bg-gradient-to-r from-primary to-accent text-white rounded-2xl font-semibold shadow-lg shadow-primary/30 hover:shadow-primary/50 transition-all">Registrar Colaborador</button>
                    </div>
                </div>
            </form>
        </div>
    </main>

    
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
        <script src="scripts/sidebar.js"></script>
         <script src="scripts/aton-widget.js" defer></script>
    <script src="scripts/admin-common.js"></script>
    <script src="scripts/cadastro-funcionarios.js"></script>
    <script>
        function getGreeting() {
            const hour = new Date().getHours();
            if (hour >= 5 && hour < 12) return "Bom dia";
            if (hour >= 12 && hour < 18) return "Boa tarde";
            return "Boa noite";
        }

        function updateHeaderClock() {
            const element = document.getElementById('current-time');
            if (element) {
                element.textContent = new Date().toLocaleTimeString('pt-BR', { hour12: false });
            }
        }

        function setUserHeader() {
            const user = getAuthUser() || {};
            const greeting = document.getElementById('user-greeting');
            const nameDisplay = document.getElementById('user-name-display');
            const roleDisplay = document.getElementById('user-role-display');
            const avatar = document.getElementById('user-avatar');
            const label = user.nome || user.name || user.email || 'Administrador';
            if (greeting) greeting.textContent = `${getGreeting()}, ${label}`;
            if (nameDisplay) nameDisplay.textContent = label;
            if (roleDisplay) roleDisplay.textContent = (user.funcao || user.role || 'Root Access').toUpperCase();
            if (avatar) {
                avatar.src = user.avatar_url || user.foto || user.photo || user.avatar || `https://ui-avatars.com/api/?name=${encodeURIComponent(label)}&background=0F172A&color=3B82F6`;
                avatar.alt = label;
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            ensureAuthenticated();
            updateHeaderClock();
            setInterval(updateHeaderClock, 1000);
            setUserHeader();
        });
    </script>
</body>
</html>





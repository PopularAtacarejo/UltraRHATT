<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Experiencia - Colaboradores</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <link rel="stylesheet" href="assets/css/tailwind.css">
</head>
<body class="flex h-screen overflow-hidden">
    <aside class="w-72 glass border-r border-border-dark flex flex-col p-6 z-50" data-sidebar-active="experiencia">
        <div class="flex items-center gap-4 mb-10 px-2">
            <div>
                <h1 class="font-extrabold text-lg tracking-tight bg-gradient-to-r from-white to-text-dim bg-clip-text text-transparent">UltraRH</h1>
                <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-primary">Admin Panel</p>
            </div>
        </div>
        <nav id="sidebar-links" class="flex-1 space-y-2 overflow-y-auto pr-2"></nav>
        <div class="mt-auto pt-6 border-t border-border-dark space-y-2">
            <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-text-dim hover:text-white hover:bg-white/5 transition-all text-sm font-medium">
                <span class="material-symbols-rounded">logout</span>
                Sair do Sistema
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0 bg-bg-dark relative overflow-hidden">
        <header class="h-20 glass border-b border-border-dark flex items-center justify-between px-8 z-40">
            <div class="flex items-center gap-6">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <h2 id="user-greeting" class="text-sm font-bold text-white">Bom dia, Usuario</h2>
                        <span class="text-xs text-text-dim">|</span>
                        <span id="current-time" class="text-xs font-mono text-primary font-bold">00:00:00</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="w-2 h-2 rounded-full bg-success animate-pulse"></span>
                        <span class="text-[10px] font-mono text-text-dim uppercase tracking-wider">Sistema Online</span>
                    </div>
                </div>
            </div>
            <div class="flex items-center gap-6">
                <div class="relative user-menu-container">
                    <div class="flex items-center gap-3 pl-6 border-l border-border-dark cursor-pointer group">
                        <div class="text-right hidden sm:block">
                            <p id="user-name-display" class="text-xs font-bold text-white group-hover:text-primary transition-colors">Usuario</p>
                            <p id="user-role-display" class="text-[10px] text-text-dim font-mono uppercase">Acesso</p>
                        </div>
                        <div class="w-10 h-10 rounded-xl bg-surface-elevated border border-border-dark flex items-center justify-center overflow-hidden group-hover:border-primary transition-all">
                            <img id="user-avatar" src="https://ui-avatars.com/api/?name=Usuario&background=0F172A&color=3B82F6" alt="Usuario">
                        </div>
                        <span class="material-symbols-rounded text-text-dim group-hover:text-white transition-colors">expand_more</span>
                    </div>
                    <div class="user-dropdown-menu">
                        <div class="px-4 py-3 border-b border-white/5">
                            <p class="text-[10px] font-bold text-text-dim uppercase tracking-widest">Conta</p>
                        </div>
                        <a href="perfil.html" class="flex items-center gap-3 px-4 py-2.5 text-sm text-text-dim hover:text-white hover:bg-white/5 transition-all">
                            <span class="material-symbols-rounded text-lg">person</span>
                            Meu Perfil
                        </a>
                        <a href="configuracoes.html" class="flex items-center gap-3 px-4 py-2.5 text-sm text-text-dim hover:text-white hover:bg-white/5 transition-all">
                            <span class="material-symbols-rounded text-lg">settings</span>
                            Configuracoes
                        </a>
                        <div class="h-px bg-white/5 my-1"></div>
                        <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-2.5 text-sm text-danger hover:bg-danger/5 transition-all">
                            <span class="material-symbols-rounded text-lg">logout</span>
                            Sair da Conta
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-8 space-y-6">
            <section class="glass p-8 space-y-4 rounded-3xl">
                <div class="flex flex-wrap items-center justify-between gap-4">
                    <div>
                        <p class="text-xs uppercase tracking-wider text-text-dim flex items-center gap-2">
                            <span class="material-symbols-rounded text-primary text-lg">timer</span>
                            Experiencia
                        </p>
                        <h3 class="text-2xl font-semibold text-white">Acompanhamento de 45 e 90 dias</h3>
                    </div>
                    <button id="refresh-experiencia" class="px-4 py-2 rounded-2xl bg-gradient-to-r from-primary to-accent text-xs font-semibold uppercase tracking-[0.4em] shadow-[0_15px_35px_rgba(59,130,246,0.35)]">Atualizar</button>
                </div>
                <p id="experiencia-feedback" class="text-sm text-text-dim">Carregando colaboradores em experiencia...</p>
            </section>

            <section class="space-y-3">
                <h4 class="text-xs uppercase tracking-[0.4em] text-text-dim">Fase 1 (0-45 dias)</h4>
                <div id="fase1-list" class="grid gap-4 lg:grid-cols-2"></div>
            </section>

            <section class="space-y-3">
                <h4 class="text-xs uppercase tracking-[0.4em] text-text-dim">Fase 2 (46-90 dias)</h4>
                <div id="fase2-list" class="grid gap-4 lg:grid-cols-2"></div>
            </section>

            <section class="space-y-3">
                <h4 class="text-xs uppercase tracking-[0.4em] text-text-dim">Reprovados na experiencia</h4>
                <div id="reprovados-list" class="grid gap-4 lg:grid-cols-2"></div>
            </section>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="scripts/sidebar.js"></script>
    <script src="scripts/admin-common.js"></script>
    <script src="scripts/experiencia.js"></script>
    <script>
        function getGreeting() {
            const hour = new Date().getHours();
            if (hour < 12) return "Bom dia";
            if (hour < 18) return "Boa tarde";
            return "Boa noite";
        }
        function updateHeaderClock() {
            const element = document.getElementById("current-time");
            if (element) {
                element.textContent = new Date().toLocaleTimeString("pt-BR", { hour12: false });
            }
        }
        function setUserHeader() {
            const user = getAuthUser() || {};
            const label = user.nome || user.name || user.email || "Usuario";
            const greeting = document.getElementById("user-greeting");
            const nameDisplay = document.getElementById("user-name-display");
            const roleDisplay = document.getElementById("user-role-display");
            const avatar = document.getElementById("user-avatar");
            if (greeting) greeting.textContent = `${getGreeting()}, ${label}`;
            if (nameDisplay) nameDisplay.textContent = label;
            if (roleDisplay) roleDisplay.textContent = (user.funcao || user.role || "Acesso").toUpperCase();
            if (avatar) {
                avatar.src = user.avatar_url || user.foto || user.photo || user.avatar || `https://ui-avatars.com/api/?name=${encodeURIComponent(label)}&background=0F172A&color=3B82F6`;
                avatar.alt = label;
            }
        }
        document.addEventListener("DOMContentLoaded", () => {
            ensureAuthenticated();
            updateHeaderClock();
            setInterval(updateHeaderClock, 1000);
            setUserHeader();
        });
    </script>
</body>
</html>

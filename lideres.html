<!DOCTYPE html>
<html lang="pt-BR" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de Líderes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Rounded:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" rel="stylesheet">
    <script id="tailwind-config">
        tailwind.config = {
            darkMode: "class",
            theme: {
                extend: {
                    colors: {
                        "primary": "#3B82F6",
                        "primary-hover": "#2563EB",
                        "accent": "#8B5CF6",
                        "bg-dark": "#030712",
                        "surface-dark": "#0F172A",
                        "surface-elevated": "#1E293B",
                        "border-dark": "#334155",
                        "text-main": "#F1F5F9",
                        "text-dim": "#94A3B8",
                        "success": "#10B981",
                        "warning": "#F59E0B",
                        "danger": "#EF4444"
                    },
                    fontFamily: {
                        "sans": ["Plus Jakarta Sans", "Inter", "sans-serif"],
                        "mono": ["JetBrains Mono", "monospace"]
                    },
                    boxShadow: {
                        'glow-primary': '0 0 25px rgba(59, 130, 246, 0.25)',
                        'glow-accent': '0 0 25px rgba(139, 92, 246, 0.25)'
                    }
                }
            }
        }
    </script>
    <style type="text/tailwindcss">
        @layer base {
            body {
                @apply bg-bg-dark text-text-main font-sans antialiased selection:bg-primary/30;
            }
        }
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { @apply bg-transparent; }
        ::-webkit-scrollbar-thumb { @apply bg-border-dark rounded-full hover:bg-primary/50 transition-colors; }
        .glass {
            @apply backdrop-blur-md bg-surface-dark/80 border border-white/5;
        }
        .glass-elevated {
            @apply backdrop-blur-xl bg-surface-elevated/90 border border-white/10;
        }
        .sidebar-item {
            @apply flex items-center gap-3 px-4 py-3 rounded-xl transition-all duration-300 text-text-dim hover:text-white hover:bg-white/5;
        }
        .sidebar-item.active {
            @apply bg-gradient-to-r from-primary/10 to-accent/10 text-primary border border-primary/20 shadow-glow-primary;
        }
        .input-pill {
            @apply w-full bg-surface-dark border border-white/10 rounded-2xl py-3 px-4 text-sm text-white placeholder:text-text-dim focus:ring-primary/50 focus:border-primary/50 transition-all;
        }
        .detail-pill {
            @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-[10px] uppercase tracking-[0.4em] font-bold text-text-dim bg-white/5 border border-white/10;
        }
        .leader-card {
            @apply glass rounded-3xl border border-white/10 p-4 space-y-3 relative;
        }
        .leader-card.active {
            @apply border-primary shadow-glow-primary;
        }
        .chip {
            @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold uppercase tracking-[0.35em] text-primary border border-primary/30 bg-primary/10;
        }
        .chip button {
            @apply text-primary/70 hover:text-white transition;
        }
        .hero-stats {
            @apply grid gap-4 md:grid-cols-3;
        }
        .hero-stat {
            @apply glass rounded-3xl border border-white/10 p-5 flex flex-col gap-2;
        }
        .hero-stat span {
            @apply text-[10px] uppercase tracking-[0.4em] text-text-dim;
        }
        .hero-stat strong {
            @apply text-3xl font-bold text-white;
        }
        .glass-hero {
            @apply relative overflow-hidden rounded-[32px] border border-white/10 bg-gradient-to-br from-primary/40 via-surface-elevated/60 to-accent/40;
        }
        .glass-hero::after {
            content: "";
            @apply pointer-events-none absolute inset-0 bg-gradient-to-br from-white/30 via-transparent to-transparent opacity-40 blur-3xl;
        }
        .hero-spotlight {
            @apply absolute w-40 h-40 rounded-full bg-white/10 blur-[90px];
            top: 10%;
            right: -10%;
        }
        .leader-section {
            @apply grid gap-6 lg:grid-cols-[1.1fr_1fr] xl:grid-cols-[1.2fr_1fr];
        }
        .leader-list {
            @apply space-y-4;
        }
        .leader-card {
            @apply glass rounded-3xl border border-white/10 p-5 transition duration-300 hover:border-primary/60 hover:shadow-glow-primary;
        }
        .leader-card.active {
            @apply border-primary shadow-glow-primary;
        }
        .detail-shell, .form-shell, .promotion-shell {
            @apply glass-elevated rounded-[30px] p-6 space-y-4 border border-white/10 shadow-[0_25px_60px_rgba(15,23,42,0.4)];
        }
        .form-shell {
            @apply bg-gradient-to-br from-[#0B1222] via-[#11142f] to-[#0f172a] border border-white/10 shadow-[0_20px_50px_rgba(5,9,24,0.75)];
        }
        .form-shell h3 {
            @apply text-3xl font-semibold text-white;
        }
        .form-shell legend {
            @apply text-[10px] uppercase tracking-[0.45em] text-text-dim;
        }
        .form-shell .form-label {
            @apply text-[10px] uppercase tracking-[0.35em] text-text-dim;
        }
        .status-pill {
            @apply inline-flex items-center gap-2 px-3 py-1 rounded-full text-[11px] font-semibold tracking-[0.3em] uppercase bg-white/10 border border-white/20 text-text-dim;
        }
        .form-input {
            @apply input-pill bg-gradient-to-br from-black/40 to-surface-dark/80 border border-white/5;
        }
        .form-input:focus {
            @apply border-primary ring-1 ring-primary/40;
        }
        .form-grid {
            @apply grid gap-4 md:grid-cols-2;
        }
        .setores-actions {
            @apply grid gap-3 md:grid-cols-[1fr_auto];
        }
        .setor-select-wrap {
            @apply flex flex-col gap-2;
        }
        .add-setor-btn {
            @apply uppercase tracking-[0.4em] text-[11px] px-4 py-2 border border-primary/40 rounded-full text-primary bg-gradient-to-r from-primary/70 to-accent/70 shadow-lg shadow-primary/40;
        }
        .leader-grid {
            @apply grid gap-6;
        }
        .dashboard-card {
            @apply rounded-2xl border border-white/10 bg-white/5 p-4 shadow-[0_18px_50px_rgba(15,23,42,0.25)] space-y-2;
        }
        .dashboard-card p {
            @apply text-[10px] uppercase tracking-[0.3em] text-text-dim;
        }
        .dashboard-card strong {
            @apply text-3xl font-semibold text-white;
        }
        .dashboard-card span {
            @apply text-sm text-white/70;
        }
        .sector-card {
            @apply bg-surface-dark/80 rounded-2xl border border-white/10 p-4;
        }
        .sector-card span {
            @apply text-[11px] uppercase tracking-[0.3em] text-text-dim;
        }
    </style>

    <style>
        .brand-bolt-wrap {
            position: relative;
        }
        .brand-bolt-wrap::after {
            content: "";
            position: absolute;
            inset: -6px;
            border-radius: 18px;
            background: radial-gradient(circle at 40% 30%, rgba(250, 204, 21, 0.85), rgba(250, 204, 21, 0.25) 45%, rgba(250, 204, 21, 0) 70%);
            filter: blur(10px);
            opacity: 0.0;
            transition: opacity 0.3s ease;
            pointer-events: none;
        }
        .brand-bolt-wrap:hover::after {
            opacity: 1;
        }
        .brand-bolt {
            color: #facc15;
            filter: drop-shadow(0 0 10px rgba(250, 204, 21, 0.9)) drop-shadow(0 0 22px rgba(250, 204, 21, 0.7));
            transition: transform 0.3s ease, filter 0.3s ease;
        }
        .brand-bolt-wrap:hover .brand-bolt {
            transform: scale(1.18) rotate(-2deg);
            filter: drop-shadow(0 0 16px rgba(250, 204, 21, 1)) drop-shadow(0 0 34px rgba(250, 204, 21, 0.85));
        }
    </style>


    <style>
        .brand-bolt-wrap::after { display: none; }
        .brand-initials {
            font-weight: 800;
            font-size: 0.9rem;
            letter-spacing: 0.12em;
            color: #e2e8f0;
            text-transform: uppercase;
        }
    </style>

</head>
<body class="flex h-screen overflow-hidden">
    <aside class="w-72 glass border-r border-border-dark flex flex-col p-6 z-50" data-sidebar-active="lideres">
        <div class="flex items-center gap-4 mb-10 px-2">
            <div>
                <h1 class="font-extrabold text-lg tracking-tight bg-gradient-to-r from-white to-text-dim bg-clip-text text-transparent">UltraRH</h1>
                <p class="text-[10px] font-bold uppercase tracking-[0.2em] text-primary">Admin Panel</p>
            </div>
        </div>

                <nav id="sidebar-links" class="flex-1 space-y-2 overflow-y-auto pr-2">
        </nav>


        <div class="mt-auto pt-6 border-t border-border-dark space-y-2">
            <button onclick="cleanupCandidates()" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-text-dim hover:text-danger hover:bg-danger/5 transition-all text-sm font-medium">
                <span class="material-symbols-rounded">delete_sweep</span>
                Limpar Expirados
            </button>
            <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-3 rounded-xl text-text-dim hover:text-white hover:bg-white/5 transition-all text-sm font-medium">
                <span class="material-symbols-rounded">logout</span>
                Sair do Sistema
            </button>
        </div>
    </aside>

    <main class="flex-1 flex flex-col min-w-0 bg-bg-dark relative overflow-hidden">
        <div class="absolute top-[-10%] right-[-10%] w-[500px] h-[500px] bg-primary/5 rounded-full blur-[120px] pointer-events-none"></div>
        <div class="absolute bottom-[-10%] left-[-10%] w-[500px] h-[500px] bg-accent/5 rounded-full blur-[120px] pointer-events-none"></div>

        <header class="h-20 glass border-b border-border-dark flex items-center justify-between px-8 z-40">
            <div class="flex items-center gap-6">
                <div class="flex flex-col">
                    <div class="flex items-center gap-2">
                        <h2 id="user-greeting" class="text-sm font-bold text-white">Bom dia, Jeferson</h2>
                        <span class="text-xs text-text-dim">|</span>
                        <span id="current-time" class="text-xs font-mono text-primary font-bold">10:02:54</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span id="system-status-dot" class="w-2 h-2 rounded-full bg-success animate-pulse"></span>
                        <span id="system-status-text" class="text-[10px] font-mono text-text-dim uppercase tracking-wider">Sistema Online</span>
                    </div>
                </div>
            </div>

            <div class="flex items-center gap-6">
                <div class="relative user-menu-container">
                    <div class="flex items-center gap-3 pl-6 border-l border-border-dark cursor-pointer group">
                        <div class="text-right hidden sm:block">
                            <p id="user-name-display" class="text-xs font-bold text-white group-hover:text-primary transition-colors">Jeferson</p>
                            <p id="user-role-display" class="text-[10px] text-text-dim font-mono uppercase">Desenvolvedor</p>
                        </div>
                        <div class="w-10 h-10 rounded-xl bg-surface-elevated border border-border-dark flex items-center justify-center overflow-hidden group-hover:border-primary transition-all">
                            <img id="user-avatar" src="https://ui-avatars.com/api/?name=Jeferson&background=0F172A&color=3B82F6" alt="Jeferson">
                        </div>
                        <span class="material-symbols-rounded text-text-dim group-hover:text-white transition-colors">expand_more</span>
                    </div>
                    <div class="user-dropdown-menu">
                        <div class="px-4 py-3 border-b border-white/5">
                            <p class="text-[10px] font-bold text-text-dim uppercase tracking-widest">Conta</p>
                        </div>
                        <a href="perfil.html" class="flex items-center gap-3 px-4 py-2.5 text-sm text-text-dim hover:text-white hover:bg-white/5 transition-all">
                            <span class="material-symbols-rounded text-lg">person</span>
                            Meu Perfil
                        </a>
                        <a href="configuracoes.html" class="flex items-center gap-3 px-4 py-2.5 text-sm text-text-dim hover:text-white hover:bg-white/5 transition-all">
                            <span class="material-symbols-rounded text-lg">settings</span>
                            Configurações
                        </a>
                        <div class="h-px bg-white/5 my-1"></div>
                        <button onclick="logout()" class="w-full flex items-center gap-3 px-4 py-2.5 text-sm text-danger hover:bg-danger/5 transition-all">
                            <span class="material-symbols-rounded text-lg">logout</span>
                            Sair da Conta
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <div class="flex-1 overflow-y-auto p-8 space-y-8">
            <section class="glass-hero p-8 relative overflow-hidden">
                <div class="hero-spotlight"></div>
                <div class="flex flex-col gap-3 max-w-3xl">
                    <p class="text-xs uppercase tracking-[0.4em] text-text-dim">Painel de liderança</p>
                    <h1 class="text-4xl lg:text-5xl font-bold text-white">Arquitetura de líderes</h1>
                    <p class="max-w-2xl text-sm text-text-dim">Monitoramento, cadastros e insights em um único painel. Os indicadores abaixo refletem o estado atual da supervisão regional.</p>
                </div>
                <div class="hero-stats mt-6 grid-cols-3 lg:grid-cols-4">
                    <article class="hero-stat">
                        <span>Líderes ativos</span>
                        <strong id="total-leaders">0</strong>
                        <p class="text-sm text-text-dim">Gestores registrados</p>
                    </article>
                    <article class="hero-stat">
                        <span>Setores supervisionados</span>
                        <strong id="total-setores">0</strong>
                        <p class="text-sm text-text-dim">Áreas monitoradas</p>
                    </article>
                    <article class="hero-stat">
                        <span>Colaboradores monitorados</span>
                        <strong id="total-colaboradores">0</strong>
                        <p class="text-sm text-text-dim">Funcionários impactados</p>
                    </article>
                    <article class="hero-stat">
                        <span>Nível de cobertura</span>
                        <strong id="coverage-rate">0%</strong>
                        <p class="text-sm text-text-dim">Cobertura média das equipes</p>
                    </article>
                </div>
            </section>

            <div class="leader-section">
                <div class="leader-grid leader-list">
                    <article class="detail-shell">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs uppercase tracking-[0.4em] text-text-dim">Líderes</p>
                                <h3 class="text-2xl font-semibold text-white">Rede de supervisão</h3>
                            </div>
                            <button id="refresh-lideres-btn" type="button" class="status-pill bg-white/5 border-white/20 text-white">Atualizar</button>
                        </div>
                        <div id="lideres-list">
                            <p class="text-sm text-text-dim">Carregando líderes...</p>
                        </div>
                    </article>
                    <article class="detail-shell">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs uppercase tracking-[0.4em] text-text-dim">Insights rápidos</p>
                                <h3 class="text-xl font-semibold text-white">Painel de indicadores reais</h3>
                            </div>
                            <span class="status-pill" id="insights-updated">Atualizado agora</span>
                        </div>
                        <div class="mt-4 grid gap-4 sm:grid-cols-3">
                            <div class="dashboard-card">
                                <p>Líder com mais setores</p>
                                <strong id="insight-top-leader-name">—</strong>
                                <span id="insight-top-leader-count" class="text-sm text-white/70">0 setores</span>
                            </div>
                            <div class="dashboard-card">
                                <p>Setores do líder selecionado</p>
                                <strong id="insight-selected-sector-count">—</strong>
                                <span id="insight-selected-sector-meta" class="text-sm text-white/70">Selecione um líder</span>
                            </div>
                            <div class="dashboard-card">
                                <p>Colaboradores ativos</p>
                                <strong id="insight-selected-employee-count">0</strong>
                                <span id="insight-selected-employee-meta" class="text-sm text-white/70">Aguardando seleção</span>
                            </div>
                        </div>
                        <div class="mt-6">
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Distribuição por setor</p>
                            <div id="insights-sector-breakdown" class="mt-3 grid gap-3"></div>
                        </div>
                    </article>
                </div>

                <div class="leader-grid">
                    <article class="detail-shell">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs uppercase tracking-[0.4em] text-text-dim">Detalhe do líder</p>
                                <h3 id="detail-name" class="text-2xl font-semibold text-white">Selecione um líder</h3>
                            </div>
                            <span id="detail-count" class="status-pill">0 colaboradores</span>
                        </div>
                        <div class="space-y-3">
                            <p id="detail-email" class="text-sm text-text-dim">Email: —</p>
                            <p id="detail-phone" class="text-sm text-text-dim">Telefone: —</p>
                            <p id="detail-observations" class="text-sm text-text-dim italic">Observações de liderança</p>
                        </div>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Setores sob supervisão</p>
                            <div id="detail-setores" class="mt-3 flex flex-wrap gap-2">
                                <span class="chip">Nenhum setor</span>
                            </div>
                        </div>
                        <p id="detail-function-summary" class="text-sm text-text-dim">Funções monitoradas: —</p>
                        <div>
                            <p class="text-[10px] uppercase tracking-[0.4em] text-text-dim">Colaboradores na supervisão</p>
                            <div id="detail-colaboradores" class="mt-3 bg-surface-dark border border-white/5 rounded-3xl p-3 space-y-2">
                                <p class="text-sm text-text-dim">Selecione um líder para carregar os colaboradores.</p>
                            </div>
                        </div>
                    </article>
                    <article class="form-shell">
                        <div class="flex flex-wrap items-center justify-between gap-4">
                            <div>
                                <p class="text-[11px] uppercase tracking-[0.5em] text-white/40">Cadastro / edição</p>
                                <h3 id="form-title" class="text-3xl font-semibold text-white leading-tight">Novo líder</h3>
                            </div>
                            <button type="button" class="status-pill border-white/30 bg-white/10 text-xs">Gerencie equipes</button>
                        </div>
                        <form id="lider-form" class="space-y-5">
                            <div class="form-grid">
                                <div>
                                    <label class="text-sm uppercase tracking-[0.35em] text-text-dim form-label">Nome *</label>
                                    <input id="lider-name" name="nome" type="text" required class="form-input" placeholder="Ana Moura" />
                                </div>
                                <div>
                                    <label class="text-sm uppercase tracking-[0.35em] text-text-dim form-label">E-mail</label>
                                    <input id="lider-email" name="email" type="email" class="form-input" placeholder="ana.moura@popular.com" />
                                </div>
                                <div>
                                    <label class="text-sm uppercase tracking-[0.35em] text-text-dim form-label">Telefone</label>
                                    <input id="lider-phone" name="telefone" type="text" class="form-input" placeholder="(82) 9 9999-0000" />
                                </div>
                                <div>
                                    <label class="text-sm uppercase tracking-[0.35em] text-text-dim form-label">Observações</label>
                                    <input id="lider-observacoes" name="observacoes" type="text" class="form-input" placeholder="Coordena áreas regionais" />
                                </div>
                            </div>
                            <div class="space-y-3">
                                <label class="form-label">Setores sob responsabilidade</label>
                                <div class="setores-actions">
                                    <input id="setor-input" list="setores-datalist" type="text" class="form-input" placeholder="Ex: Operações" />
                                    <button type="button" id="add-setor-btn" class="add-setor-btn">Adicionar</button>
                                </div>
                                <datalist id="setores-datalist"></datalist>
                                <div class="setor-select-wrap">
                                    <label class="text-[10px] uppercase tracking-[0.3em] text-text-dim">Escolha um setor</label>
                                    <select id="setor-select" class="form-input">
                                        <option value="">Outros setores</option>
                                    </select>
                                </div>
                                <div class="space-y-1">
                                    <p class="text-[10px] uppercase tracking-[0.3em] text-text-dim">Setores cadastrados</p>
                                    <div id="setores-options" class="flex flex-wrap gap-2"></div>
                                </div>
                                <div id="setores-chips" class="flex flex-wrap gap-2"></div>
                            </div>
                            <div class="flex items-center justify-between">
                                <p id="leader-feedback" class="text-sm text-text-dim"></p>
                            <div class="flex flex-wrap items-center justify-between gap-4">
                                <div class="flex gap-3">
                                    <button id="cancel-edit-btn" type="button" class="hidden px-5 py-3 border border-white/10 rounded-2xl text-text-dim uppercase tracking-[0.4em] text-xs hover:border-white/30">Cancelar</button>
                                    <button type="button" class="status-pill uppercase tracking-[0.4em] text-xs">Gerencie equipes</button>
                                </div>
                                <button id="submit-lider-btn" type="submit" class="px-8 py-3 rounded-3xl text-xs font-semibold uppercase tracking-[0.4em] text-white bg-gradient-to-r from-[#3B82F6] to-[#A855F7] shadow-[0_20px_40px_rgba(59,130,246,0.35)]">Salvar líder</button>
                            </div>
                            </div>
                        </form>
                    </article>
                    <article class="promotion-shell">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-xs uppercase tracking-[0.4em] text-text-dim">Colaboradores disponíveis</p>
                                <h3 class="text-lg font-semibold text-white">Promover novo líder</h3>
                            </div>
                            <span class="status-pill">Base de `funcionarios-ativos`</span>
                        </div>
                        <div id="candidate-workers" class="space-y-3">
                            <p class="text-sm text-text-dim">Carregando colaboradores...</p>
                        </div>
                    </article>
                </div>
            </div>
        </div>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
        <script src="scripts/sidebar.js"></script>
    <script src="scripts/admin-common.js"></script>
     <script src="scripts/aton-widget.js" defer></script>
    <script src="scripts/lideres.js"></script>
</body>
</html>
